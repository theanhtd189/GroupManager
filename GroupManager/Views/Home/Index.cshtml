@using GroupManager.Models
@using GroupManager.Functions
@{
    Layout = "~/Views/Shared/_Header.cshtml";
    var listgroup = (List<Group>)ViewBag.ListGroup;
    var listpost = (List<Post>)ViewBag.ListPost;
    var listcmt = (List<PostComment>)ViewBag.ListComment;
    var listreply = (List<QuestionComment>)ViewBag.ListReply;
    var listquestion = (List<Question>)ViewBag.ListQuestion;
    var dal = new User_Function();
    var dal_post = new Post_Function();
    var dal_qu = new Question_Function();
}
        <div class="right">
            <h3 class="heading">Danh sách</h3>
            <div class="group_list">
                <h4 class="left-heading">Các nhóm đã tham gia</h4>
                @if (listgroup.Count > 0)
                { foreach (var item in listgroup)
                    {
                        <div class="list">
                            <div class="items">
                                <div class="info">
                                    <span>TÊN NHÓM: <strong>@item.Title</strong></span>
                                    <span>Ngày tạo: <strong>@item.Created_Date.Value.ToString("dd/MM/yyyy")</strong></span>
                                    <span>Người tạo: <a href="#">@dal.GetUser((int)item.Created_By).FullName</a> </span>
                                    @if (ViewBag.CurrentUser.ID == item.Created_By)
                                    {
                                <span>Chức vụ:  <strong>ADMIN</strong></span>
                                    }
                                    else
                                    {
                                <span>Chức vụ:  <strong>Thành viên</strong></span>
                                    }
                                </div>
                                <div class="_options">
                                    <button class="btn"><a href="@Url.Action("GroupDetail","Home")/@item.ID">Truy cập</a></button>
                                    @if (ViewBag.CurrentUser.ID != item.Created_By)
                                    {
                                        <button class="btn"><a href="@Url.Action("GroupDetail","Home",new { id=item.ID, act="out" })" onclick="return confirm('Bạn có xác nhận muốn rời nhóm?')">Rời nhóm</a></button>
                                    }
                                    else {
                                    <button class="btn"><a href="@Url.Action("GroupDetail","Home",new { id=item.ID, act="del" })" onclick="return confirm('Bạn có xác nhận muốn xóa nhóm?')">Xóa nhóm</a></button>
                                    }
                                    </div>
                            </div>
                        </div>
                    } 
                }
                else
                {
                    <p> Chưa tham gia nhóm nào</p>
                }
            </div>

            <div class="post_list">
                <h4 class="left-heading">Các bài viết đã đăng</h4>
                @if (listpost.Count > 0)
                {
                    foreach (var item in listpost)
                    {
                        <div class="list">
                            <div class="items i-flex">
                                <div class="o_img" style="background-image: url('../../Resourses/Images/post.png');">
                                </div>
                                <div class="p_info">
                                    <div class="info">
                                        <span>TIÊU ĐỀ: <strong>@item.Title</strong></span>
                                        <span>Ngày tạo: <strong>@item.Created_Date.Value.ToString("dd/MM/yyyy")</strong></span>
                                        <span>CHUYÊN MỤC: <a href="#">@dal_post.GetCategory((int)item.Category_ID).Title</a> </span>
                                    </div>
                                    <div class="_options">
                                        <button class="btn"><a href="@Url.Action("Post","Home", new { id=item.ID })">Xem</a></button>
@*                                        <button class="btn"><a href="@Url.Action("DeletePost","Home", new { id=item.ID })" onclick="return confirm('Bạn có xác nhận muốn xóa?')">Xóa</a></button>
*@                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                }
                else
                {
                    <p> Chưa đăng bài viết nào</p>
                }
            </div>
            <div class="question_list">
                <h4 class="left-heading">Các câu hỏi đã đăng</h4>
                @if (listquestion != null)
                {
                    if (listquestion.Count > 0)
                    {
                        foreach (var item in listquestion)
                        {
                            <div class="list">
                                <div class="items i-flex">
                                    <div class="o_img" style="background-image: url('../../Resourses/Images/post.png');">
                                    </div>
                                    <div class="p_info">
                                        <div class="info">
                                            <span>TIÊU ĐỀ: <strong>@item.Title</strong></span>
                                            <span>Ngày tạo: <strong>@item.Created_Date.Value.ToString("dd/MM/yyyy")</strong></span>
                                            <span>CHUYÊN MỤC: <a href="#">@dal_qu.GetCategory((int)item.Category_ID).Title</a> </span>
                                        </div>
                                        <div class="_options">
                                            <button class="btn"><a href="@Url.Action("Question","Home", new { id=item.ID })">Xem</a></button>
@*                                            <button class="btn"><a href="@Url.Action("DeleteQuestion","Home", new { id=item.ID })" onclick="return confirm('Bạn có xác nhận muốn xóa?')">Xóa</a></button>
*@                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                    else
                    {
                        <p> Chưa đăng câu hỏi nào</p>
                    }
                }

            </div>
        </div>
